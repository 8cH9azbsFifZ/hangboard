<!DOCTYPE html>
<html>
<head>
	<title>Hangboard</title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

	<script id=myScript>
		function toggleDisplay(me)
		{
		if(me.getAttribute("display")=="inline")
			me.setAttribute("display","none")
		else
			me.setAttribute("display","inline")
		}
	</script>


	<!--- Progress Bar -->
	<script>
		var source = new EventSource("/progress");
		source.onmessage = function(event) {
			//const newElement = document.createElement("li");
			//const eventList = document.getElementById("list");

			//newElement.textContent = "message: " + event.data;
			//eventList.appendChild(newElement);
			//const time = JSON.parse(event.data).time;
			var parsed = JSON.parse(event.data);
			var completed = parsed.Completed;
			
			//$('.progress-bar').css('width', event.data+'%').attr('aria-valuenow', event.data);
			//$('.progress-bar-label').text(event.data+'%');
			$('.progress-bar').css('width', completed+'%').attr('aria-valuenow', completed);
			$('.progress-bar-label').text(completed+'%');

			toggleDisplay(A1);
		}
	</script>

	<script>
		document.addEventListener("onload",inlineSVG(),false)
		function inlineSVG()
		{
			var SVGFile="{{url_for('static', filename='zlagboard.svg')}}"
			var loadXML = new XMLHttpRequest;
			function handler(){
			if(loadXML.readyState == 4 && loadXML.status == 200)
				svgInlineDiv.innerHTML=loadXML.responseText
			}
			if (loadXML != null){
				loadXML.open("GET", SVGFile, true);
				loadXML.onreadystatechange = handler;
				loadXML.send();
			}
		}
	</script>



</head>
<body>

	<div>
		Exercise: {{Exercise_Name}} (# {{Current_Exercise}} of {{Total_Exercises}})
	</div>
	<!--- Progress Bar -->
	<div style="margin: 50px;">
		<div class="progress" style="width: 50%;">
			<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
				<span class="progress-bar-label">0%</span>Test
			</div>
		</div>

		<div style="width: 30%">
			<div id="svgInlineDiv" style="width: 30%"></div>
			<button onClick=toggleDisplay(A1)>toggle A1</button>
			<button onClick=toggleDisplay(A7)>toggle A7</button>
			<button onClick=toggleDisplay(Board)>toggle Board</button>
		</div>
	</div>

	<div>
        <form method="post" action="/">
                <input type="submit" value="Encrypt" name="Encrypt"/>
                <input type="submit" value="Decrypt" name="Decrypt" />
        </form>
	</div>





</body>
</html>
