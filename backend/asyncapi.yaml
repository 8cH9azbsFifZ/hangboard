asyncapi: 2.0.0
info:
  title: Hangboard application
  version: '0.0.1'
  description: |
    Force sensing hangboard application.
    Backend communication protocol. 
  license:
    name: GPLv3
    url: 'https://www.gnu.org/licenses/gpl-3.0.en.html'
servers:
  mosquitto:
    url: mqtt://t20
    protocol: mqtt
channels:       
  hangboard/sensor/sensorstatus:
    subscribe:
      summary: Current sensor status, i.e. hang status.
      operationId: GetCurrentSensorStatus
      message:
        name: Sensor Status
        payload:
          type: object
          properties:
            time:
              type: integer
              description: Timestamp in seconds.
              example: 123412341234
            HangChangeDetected:
              type: string
              description: Hang change detected.
              examples: ["Hang", "NoHang"]
            HangDetected:
              type: string
              description: Hang change detected.
              examples: ["True", "False"]
  hangboard/sensor/lastexercise:
    subscribe:
      summary: Summary of the last exercise.
      operationId: GetLastExerciseStatistics
      message:
        name: Last Exercise
        payload:
          type: object
          properties:
            time:
              type: integer
              description: Timestamp in seconds.
              example: 123412341234
            LastHangTime:
              type: number
              description: Last hang time in seconds.
              example: 123
            LastPauseTime:
              type: number
              description: Last pause time in seconds.
              example: 111              
            MaximalLoad:
              type: number
              description: Maximal load in last exercise in kg.
              example: 32                           
  hangboard/workout/userstatistics:
    subscribe:
      summary: User statistics (i.e. intensity).
      operationId: GetUserStatistics
      message:
        name: User statistics.
        payload:
          type: object
          properties:
            time:
              type: integer
              description: Timestamp in seconds.
              example: 123412341234
            CurrentIntensity:
              type: number
              description: Current intensity - current load / maximal load - for a given hand and hold combination.
              examples: [0.23, 0.77, 1.2]
